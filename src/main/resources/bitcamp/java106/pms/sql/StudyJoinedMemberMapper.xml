<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="bitcamp.java106.pms.dao.StudyJoinedMemberDao">

  <resultMap type="StudyJoinedMember" id="StudyJoinedMemberMap">
    <id column="stdno" property="studyNo"/>
    <result column="memno" property="memNo"/>
    <result column="rdt" property="registedDate"/>
    <result column="status" property="status"/>
    <association property="member" javaType="Member">
      <id column="memno" property="no"/>
      <id column="mname" property="name"/>
     
    </association>
   <association property="study" javaType="StudyInfo">
      <id column="stdno" property="no"/>
      <id column="sname" property="name"/>
      <id column="ctgr" property="category"/>
   </association>
  </resultMap>
    
  <select id="selectList" 
          resultMap="StudyJoinedMemberMap"
          >
  select study_joined_member.stdno, member.mname, member.email, study_joined_member.rdt, study_joined_member.status
  from study_joined_member
  left join member
  on study_joined_member.memno=member.memno
  where study_joined_member.stdno=1 
  AND status=1<!-- url에서 가져오 -->
</select>

<select id="ListWithStudy" resultMap="StudyJoinedMemberMap" parameterType="int">
  select j.stdno , j.memno, s.sname, s.ctgr
  from study_joined_member j left join study_info s on j.stdno = s.stdno
  where j.memno=#{value}
</select>

<update id="update" parameterType="int">
    
    UPDATE study_joined_member
    SET status=2
    WHERE memno=#{valeu}, stdno=#{value} <!-- memno:체크된 회원, 해당회원/ stdno: url에서 받아오 -->
  </update>
</mapper>







