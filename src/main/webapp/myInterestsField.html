<!DOCTYPE html>
<html lang="ko">

<head>
<meta charset="UTF-8">
<title>Document</title>
<link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
<link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet">
<link rel="stylesheet" href="css/common.css">
<link rel="stylesheet" href="css/reset.css">
<link rel="stylesheet" href="css/myInterestedField.css">
<link rel="stylesheet" href="node_modules/slidebars/dist/slidebars.css">
<link rel="stylesheet" href="node_modules/sweetalert2/dist/sweetalert2.min.css">

<script src="node_modules/jquery/dist/jquery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
<script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="node_modules/slidebars/dist/slidebars.js"></script>
<script src="node_modules/sweetalert2/dist/sweetalert2.min.js"></script>
<script src="js/common.js"></script>

<script>
        
    $(document).ready(function() {
        $("#header").load( serverRoot + "/header.html" );

	    $("#saveBtn").click(function() {
	    	let myInterest = [];
	    	
	        for(let c of $('input[type=checkbox]')) {
	            if($(c).is(":checked"))
	            	myInterest.push( decodeURIComponent( $('.buttons label[for=' + $(c).attr("id") + ' ]').text() ));
	        }
	        
	        if(myInterest.length < 1) {
	        	showMessage("선택된 관심사가 없습니다.");
	        	return;
	        }
	        
	        $.post(serverRoot + "/json/member/upd_itr", {
	        	myInterest
	        }, data => {
	        	if(data == "success") {
	                showPopup("정보 변경", "관심사가 변경되었습니다.", "success");
	        		return;
	        	} 
	        	showPopup("정보 변경", "관심사 변경에 실패했습니다.", "error");
	        });
	    });
    });
    
    function count_ck(obj){
        var chkbox = document.getElementsByName("chk");
        var chkCnt = 0;
        for(var i = 0; i < chkbox.length; i++){
            if(chkbox[i].checked){
                chkCnt++;
            }
        }
        if(chkCnt>3){
        	showMessage("3개 이상 선택할 수 없습니다.");
            obj.checked = false;
            return false;
        }
    }
    
    function showMessage(text) {
        swal.mixin({
            toast: true,
            position: 'center',
            showConfirmButton: false,
            timer: 3000
          })({
              type:'error',
              title: text
          });
    }
    
    function showPopup(title, cont, type) {
        swal(title,
             cont,
             type);
    }
</script>

<style>
            #selectbox1 { display: none; }
            #selectbox1, div:#selectbox1 { display: none; }
            #selectbox1:checked ~ div:#selectbox1 { display: block; }
            #selectbox2 { display: none; }
            #selectbox2, div:#selectbox2 { display: none; }
            #selectbox2:checked ~ div:#selectbox2 { display: block; }
            
            #selectbox3 { display: none; }
            #selectbox3 ~ div:#selectbox3 { display: none; }
            #selectbox3:checked ~ div:#selectbox3 { display: block; }
            
            #selectbox4 { display: none; }
            #selectbox4 ~ div:#selectbox4 { display: none; }
            #selectbox4:checked ~ div:#selectbox4 { display: block; }
            
            #selectbox5 { display: none; }
            #selectbox5 ~ div:#selectbox5 { display: none; }
            #selectbox5:checked ~ div:#selectbox5 { display: block; }
            
            #selectbox6 { display: none; }
            #selectbox6 ~ div:#selectbox6 { display: none; }
            #selectbox6:checked ~ div:#selectbox6 { display: block; }
            
            #selectbox7 { display: none; }
            #selectbox7 ~ div:#selectbox7 { display: none; }
            #selectbox7:checked ~ div:#selectbox7 { display: block; }
            
            #selectbox8 { display: none; }
            #selectbox8 ~ div:#selectbox8 { display: none; }
            #selectbox8:checked ~ div:#selectbox8 { display: block; }
            
            #selectbox9 { display: none; }
            #selectbox9 ~ div:#selectbox9 { display: none; }
            #selectbox9:checked ~ div:#selectbox9 { display: block; }
            
            #selectbox10 { display: none; }
            #selectbox10 ~ div:#selectbox10 { display: none; }
            #selectbox10:checked ~ div:#selectbox10 { display: block; }
            section.buttons > label {
              display: block;
              text-align: center;
              line-height: 30px;
              border: 1px solid #dddddd;
              background: white;
              color: black;
              width: 160px; height: 45px;
              box-sizing: border-box;
              float: left;
              padding-top: 0.4em;
            }
            input:nth-of-type(1):checked ~ section.buttons >  label:nth-of-type(1) {
              border : 1px solid #ef6c00;
              color : #ef6c00;
            }
            input:nth-of-type(2):checked ~ section.buttons >  label:nth-of-type(2) {
               border : 1px solid #ef6c00;
              color : #ef6c00;
            }
            input:nth-of-type(3):checked ~ section.buttons >  label:nth-of-type(3) {
              border : 1px solid #ef6c00;
              color : #ef6c00;
            }
            input:nth-of-type(4):checked ~ section.buttons >  label:nth-of-type(4) {
                border : 1px solid #ef6c00;
              color : #ef6c00;
            }
            input:nth-of-type(5):checked ~ section.buttons >  label:nth-of-type(5) {
                border : 1px solid #ef6c00;
              color : #ef6c00;
            }
            input:nth-of-type(6):checked ~ section.buttons >  label:nth-of-type(6) {
                border : 1px solid #ef6c00;
              color : #ef6c00;
            }
            input:nth-of-type(7):checked ~ section.buttons >  label:nth-of-type(7) {
               border : 1px solid #ef6c00;
              color : #ef6c00;
            }
            input:nth-of-type(8):checked ~ section.buttons >  label:nth-of-type(8) {
               border : 1px solid #ef6c00;
              color : #ef6c00;
            }
            input:nth-of-type(9):checked ~ section.buttons >  label:nth-of-type(9) {
               border : 1px solid #ef6c00;
              color : #ef6c00;
            }
            input:nth-of-type(10):checked ~ section.buttons >  label:nth-of-type(10) {
               border : 1px solid #ef6c00;
              color : #ef6c00;
            }
            
            section.buttons {
              /* border: 4px dashed red; */
              overflow: hidden;
            }

</style>

</head>

<body>
    <div id="header"></div>
    <div id="container" canvas="container">
    <div class="container">
        <div class="row">
            <div class="col-sm-2" style="text-align: center">
                <div class="col-box-list">
                    <div class="class_titl">내정보</div>
                    <hr class="line3">
                    <div class="list-group cls-list">
                          <a href="myProfile.html" class="list-group-item list-group-item-action cls-list-link">
                            내 정보 관리
                        </a>
                        <a href="Mystudy.html" class="list-group-item list-group-item-action cls-list-link">
                            내 스터디
                        </a>
                        <a href="myInterestsField.html" class="list-group-item list-group-item-action cls-list-link">
                            관심 분야 설정
                        </a>
                        <a href="myMessage.html" class="list-group-item list-group-item-action cls-list-link">
                            메시지
                        </a>
                        <a href="myPasswordChange.html" class="list-group-item list-group-item-action cls-list-link">
                            비밀번호 변경
                        </a>
                        <a href="myProfileDeleteConfirm.html" class="list-group-item list-group-item-action cls-list-link">
                            계정 삭제
                        </a>
                    </div>
                </div>
            </div>
            
             <div class="col-sm-10 container-box">
                <div class="inner-container-box">
                    <h3>관심 분야 설정</h3>
                    <hr>
                    관심사는 총 3개까지 설정하실 수 있습니다.<br>
        <form>            
            <input id="selectbox1" type="checkbox" name="chk" onClick="count_ck(this);"/>
            <input id="selectbox2" type="checkbox" name="chk" onClick="count_ck(this);"/>
            <input id="selectbox3" type="checkbox" name="chk" onClick="count_ck(this);"/>
            <input id="selectbox4" type="checkbox" name="chk" onClick="count_ck(this);"/>
            <input id="selectbox5" type="checkbox" name="chk" onClick="count_ck(this);"/>
            <input id="selectbox6" type="checkbox" name="chk" onClick="count_ck(this);"/>
            <input id="selectbox7" type="checkbox" name="chk" onClick="count_ck(this);"/>
            <input id="selectbox8" type="checkbox" name="chk" onClick="count_ck(this);"/>
            <input id="selectbox9" type="checkbox" name="chk" onClick="count_ck(this);"/>
            <input id="selectbox10" type="checkbox" name="chk" onClick="count_ck(this);"/>
            <section class="buttons">
                <label for="selectbox1">IT</label>
                <label for="selectbox2">국가시험</label>
                <label for="selectbox3">기사</label>
                <label for="selectbox4">언어</label>
                <label for="selectbox5">금융</label>
                <label for="selectbox6">취업</label>
                <label for="selectbox7">토론</label>
                <label for="selectbox8">기타</label>
            </section>
            <hr style="margin-top : 2em">
    </form>
                    <br>
                    <button class="btn btn-primary" id="saveBtn">저장</button>
                </div>

            </div>
        </div>
    </div>
 </div>
    <!-- footer start -->
        <footer class="footer">
            <p style="font-size:25px">WeStudy</p>
    
            <div>
                <span>서울특별시 강남구 비트캠프 401호</span>
                <span>Tel080-777-2299</span>
                <span>개인정보취급관리자 홍길동</span>
                <span>E-mail : we_study@westudy.com</span>
            </div>
            <p>Copyright ⓒ 2018 WeStudy. All Rights Reserved.</p>
        </footer>
        <!-- footer end -->

</body>

</html>